# Nexus Learning — Project Memory

## What We Are Building
An AI-powered adaptive tutoring platform for K-10 students called **Aauti Learn** (codebase: nexus-learning). It teaches math through AI tutor characters (Cosmo the Bear + 13 others), adaptive curriculum generated by Claude AI, and a mastery-based learning system with gamification.

## Tech Stack
- Web: Next.js 14 App Router, TypeScript, TailwindCSS
- Databases: PostgreSQL (local Docker), Neo4j (connection configured)
- AI: Claude API (via persona prompts), ElevenLabs (voice TTS), HeyGen (avatar streaming)
- Auth: Auth0 (`@auth0/nextjs-auth0`)
- Payments: Stripe (test mode, INR pricing)
- Charts: Recharts
- Testing: Vitest (1,180 tests across 31 files)

## Current Status
**Phases 1-10 COMPLETE** (web only, mobile deferred). All 30 API endpoints working, all 13+ pages rendering, 1,180 tests passing.

**Phase 11 (Teacher Dashboard) is next.**

## Architecture Notes
- Route groups: `(parent)` for dashboard pages, `(student)` for learning pages — route groups do NOT appear in URLs
- Parent context: `useParent()` hook from `lib/parent-context.tsx` — derives parentId from Auth0 session
- Student pages accept `?studentId=` URL param (falls back to `demo-student-1` for backwards compat)
- Prisma ORM: `import { prisma } from "@aauti/db"` — shared DB package
- All student-facing pages wrapped in `<Suspense>` for `useSearchParams()` compatibility

## Database
- Real user: `dinakara.nagalla@dnag.com`, parentId `cmlwdn6lh0000e2tl9a0yk97f`, child `cmlwdui9u0007psfkhf0kae23` (Ishan, G5)
- Demo user: `parent@test.com`, parentId `demo-parent-1`, child `demo-student-1` (Sofia, K, PRO plan)
- Prisma enums: `GradeLevel` (K, G1-G5), `AgeGroup` (EARLY_5_7, MID_8_10, UPPER_11_12), `UserRole` (PARENT, STUDENT, TEACHER, ADMIN)

## Known Gaps
- Curriculum: only K + G1 seeded (23 nodes). G2-G5 need content.
- Settings page: stub only
- HeyGen/ElevenLabs: code wired but no real API keys configured
- Mobile: Expo app not started
- SendGrid: not integrated (reports generate but don't email)
- All personas share one HeyGen avatar ID

## Key Rules
- Read this file at the start of every session
- Update TODO.md after every completed feature
- Never commit API keys — use .env.local
- Cosmo the Bear is the MVP mascot
- Route groups `(parent)` and `(student)` don't appear in URLs
- Use `import { prisma } from "@aauti/db"` for DB access
